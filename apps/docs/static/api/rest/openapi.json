{
  "openapi": "3.0.2",
  "paths": {
    "/api/v1/auth/email-otp/send-email-otp": {
      "post": {
        "description": "Sends a one-time password to the provided email address",
        "summary": "Send sign-in OTP to email",
        "tags": ["auth"],
        "parameters": [],
        "operationId": "auth.signInEmail",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "type": {
                    "default": "sign-in",
                    "type": "string",
                    "enum": ["sign-in", "email-verification"]
                  }
                },
                "required": ["email"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["success"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/sign-in/email-otp": {
      "post": {
        "description": "Verifies the OTP and creates a session",
        "summary": "Verify email OTP",
        "tags": ["auth"],
        "parameters": [],
        "operationId": "auth.verifyEmail",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "otp": {
                    "type": "string"
                  }
                },
                "required": ["email", "otp"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "image": {
                          "type": "string",
                          "nullable": true
                        },
                        "registered": {
                          "type": "boolean"
                        },
                        "emailVerified": {
                          "type": "boolean"
                        }
                      },
                      "required": ["id", "email", "name", "image", "registered", "emailVerified"]
                    },
                    "session": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string"
                        },
                        "expiresAt": {
                          "type": "string"
                        }
                      },
                      "required": ["token", "expiresAt"]
                    }
                  },
                  "required": ["user", "session"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/session": {
      "get": {
        "description": "Returns the current user session if authenticated",
        "summary": "Get current session",
        "tags": ["auth"],
        "parameters": [],
        "operationId": "auth.getSession",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "image": {
                          "type": "string",
                          "nullable": true
                        },
                        "registered": {
                          "type": "boolean"
                        },
                        "emailVerified": {
                          "type": "boolean"
                        }
                      },
                      "required": ["id", "email", "name", "image", "registered", "emailVerified"]
                    },
                    "session": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string"
                        },
                        "expiresAt": {
                          "type": "string"
                        }
                      },
                      "required": ["token", "expiresAt"]
                    }
                  },
                  "required": ["user", "session"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/signout": {
      "post": {
        "description": "Ends the current user session",
        "summary": "Sign out",
        "tags": ["auth"],
        "parameters": [],
        "operationId": "auth.signOut",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": ["success"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/user": {
      "patch": {
        "description": "Updates the current authenticated user's information",
        "summary": "Update current user",
        "tags": ["auth"],
        "parameters": [],
        "operationId": "auth.updateUser",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "registered": {
                    "type": "boolean"
                  },
                  "name": {
                    "type": "string"
                  },
                  "image": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "image": {
                          "type": "string",
                          "nullable": true
                        },
                        "registered": {
                          "type": "boolean"
                        },
                        "emailVerified": {
                          "type": "boolean"
                        }
                      },
                      "required": ["id", "email", "name", "image", "registered", "emailVerified"]
                    }
                  },
                  "required": ["user"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["error"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/callback/{provider}": {
      "get": {
        "description": "Handles OAuth provider callbacks (redirects)",
        "summary": "OAuth callback",
        "tags": ["auth"],
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "enum": ["github", "orcid"]
            }
          }
        ],
        "operationId": "auth.oauthCallback",
        "responses": {
          "302": {
            "description": "302",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments": {
      "post": {
        "description": "Creates a new experiment with the provided configuration",
        "summary": "Create a new experiment",
        "tags": ["experiments"],
        "parameters": [],
        "operationId": "experiments.createExperiment",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "description": "The name of the experiment"
                  },
                  "description": {
                    "type": "string",
                    "description": "Optional description of the experiment"
                  },
                  "status": {
                    "type": "string",
                    "enum": ["active", "stale", "archived", "published"],
                    "description": "Initial status of the experiment"
                  },
                  "visibility": {
                    "type": "string",
                    "enum": ["private", "public"],
                    "description": "Experiment visibility setting"
                  },
                  "embargoUntil": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Embargo end date and time (ISO datetime string, will be stored as UTC in database)"
                  },
                  "members": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "role": {
                          "type": "string",
                          "enum": ["admin", "member"]
                        },
                        "firstName": {
                          "type": "string"
                        },
                        "lastName": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "nullable": true
                        }
                      },
                      "required": ["userId"]
                    },
                    "description": "Optional array of member objects with userId and role"
                  },
                  "protocols": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "protocolId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "order": {
                          "type": "integer"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": ["protocolId"]
                    },
                    "description": "Optional array of protocol objects with protocolId and order to associate with the experiment"
                  },
                  "locations": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 255
                        },
                        "latitude": {
                          "type": "number",
                          "minimum": -90,
                          "maximum": 90
                        },
                        "longitude": {
                          "type": "number",
                          "minimum": -180,
                          "maximum": 180
                        },
                        "country": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        },
                        "municipality": {
                          "type": "string"
                        },
                        "postalCode": {
                          "type": "string"
                        },
                        "addressLabel": {
                          "type": "string"
                        }
                      },
                      "required": ["name", "latitude", "longitude"]
                    },
                    "description": "Optional array of locations associated with the experiment"
                  }
                },
                "required": ["name"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "required": ["id"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "get": {
        "description": "Returns a list of experiments based on the specified filter criteria, including search.",
        "summary": "List experiments",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "filter",
            "in": "query",
            "description": "Filter experiments by relationship to the user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "enum": ["member"]
                }
              }
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter experiments by their status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "enum": ["active", "stale", "archived", "published"]
                }
              }
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search term for experiment name",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "operationId": "experiments.listExperiments",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "status": {
                        "type": "string",
                        "enum": ["active", "stale", "archived", "published"]
                      },
                      "visibility": {
                        "type": "string",
                        "enum": ["private", "public"]
                      },
                      "embargoUntil": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "createdBy": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "ownerFirstName": {
                        "type": "string",
                        "nullable": true
                      },
                      "ownerLastName": {
                        "type": "string",
                        "nullable": true
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "data": {
                        "type": "object",
                        "properties": {
                          "columns": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string"
                                },
                                "type_name": {
                                  "type": "string"
                                },
                                "type_text": {
                                  "type": "string"
                                }
                              },
                              "required": ["name", "type_name", "type_text"]
                            }
                          },
                          "rows": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "additionalProperties": {
                                "nullable": true
                              }
                            }
                          },
                          "totalRows": {
                            "type": "integer"
                          },
                          "truncated": {
                            "type": "boolean"
                          }
                        },
                        "required": ["columns", "rows", "totalRows", "truncated"]
                      },
                      "locations": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "name": {
                              "type": "string",
                              "minLength": 1,
                              "maxLength": 255
                            },
                            "latitude": {
                              "type": "number",
                              "minimum": -90,
                              "maximum": 90
                            },
                            "longitude": {
                              "type": "number",
                              "minimum": -180,
                              "maximum": 180
                            },
                            "country": {
                              "type": "string"
                            },
                            "region": {
                              "type": "string"
                            },
                            "municipality": {
                              "type": "string"
                            },
                            "postalCode": {
                              "type": "string"
                            },
                            "addressLabel": {
                              "type": "string"
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "updatedAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "latitude",
                            "longitude",
                            "createdAt",
                            "updatedAt"
                          ]
                        }
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "description",
                      "status",
                      "visibility",
                      "embargoUntil",
                      "createdBy",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}": {
      "get": {
        "description": "Returns detailed information about a specific experiment",
        "summary": "Get experiment details",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.getExperiment",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": ["active", "stale", "archived", "published"]
                    },
                    "visibility": {
                      "type": "string",
                      "enum": ["private", "public"]
                    },
                    "embargoUntil": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "ownerFirstName": {
                      "type": "string",
                      "nullable": true
                    },
                    "ownerLastName": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "columns": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "type_name": {
                                "type": "string"
                              },
                              "type_text": {
                                "type": "string"
                              }
                            },
                            "required": ["name", "type_name", "type_text"]
                          }
                        },
                        "rows": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "additionalProperties": {
                              "nullable": true
                            }
                          }
                        },
                        "totalRows": {
                          "type": "integer"
                        },
                        "truncated": {
                          "type": "boolean"
                        }
                      },
                      "required": ["columns", "rows", "totalRows", "truncated"]
                    },
                    "locations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 255
                          },
                          "latitude": {
                            "type": "number",
                            "minimum": -90,
                            "maximum": 90
                          },
                          "longitude": {
                            "type": "number",
                            "minimum": -180,
                            "maximum": 180
                          },
                          "country": {
                            "type": "string"
                          },
                          "region": {
                            "type": "string"
                          },
                          "municipality": {
                            "type": "string"
                          },
                          "postalCode": {
                            "type": "string"
                          },
                          "addressLabel": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "latitude",
                          "longitude",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "status",
                    "visibility",
                    "embargoUntil",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "description": "Updates an existing experiment with the provided changes",
        "summary": "Update experiment",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.updateExperiment",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "description": "Updated experiment name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Updated experiment description"
                  },
                  "status": {
                    "type": "string",
                    "enum": ["active", "stale", "archived", "published"],
                    "description": "Updated experiment status"
                  },
                  "visibility": {
                    "type": "string",
                    "enum": ["private", "public"],
                    "description": "Updated visibility setting"
                  },
                  "embargoUntil": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Updated embargo end date and time (ISO datetime string, will be stored as UTC in database)"
                  },
                  "locations": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 255
                        },
                        "latitude": {
                          "type": "number",
                          "minimum": -90,
                          "maximum": 90
                        },
                        "longitude": {
                          "type": "number",
                          "minimum": -180,
                          "maximum": 180
                        },
                        "country": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        },
                        "municipality": {
                          "type": "string"
                        },
                        "postalCode": {
                          "type": "string"
                        },
                        "addressLabel": {
                          "type": "string"
                        }
                      },
                      "required": ["name", "latitude", "longitude"]
                    },
                    "description": "Updated locations associated with the experiment"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": ["active", "stale", "archived", "published"]
                    },
                    "visibility": {
                      "type": "string",
                      "enum": ["private", "public"]
                    },
                    "embargoUntil": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "ownerFirstName": {
                      "type": "string",
                      "nullable": true
                    },
                    "ownerLastName": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "columns": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "type_name": {
                                "type": "string"
                              },
                              "type_text": {
                                "type": "string"
                              }
                            },
                            "required": ["name", "type_name", "type_text"]
                          }
                        },
                        "rows": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "additionalProperties": {
                              "nullable": true
                            }
                          }
                        },
                        "totalRows": {
                          "type": "integer"
                        },
                        "truncated": {
                          "type": "boolean"
                        }
                      },
                      "required": ["columns", "rows", "totalRows", "truncated"]
                    },
                    "locations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 255
                          },
                          "latitude": {
                            "type": "number",
                            "minimum": -90,
                            "maximum": 90
                          },
                          "longitude": {
                            "type": "number",
                            "minimum": -180,
                            "maximum": 180
                          },
                          "country": {
                            "type": "string"
                          },
                          "region": {
                            "type": "string"
                          },
                          "municipality": {
                            "type": "string"
                          },
                          "postalCode": {
                            "type": "string"
                          },
                          "addressLabel": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "latitude",
                          "longitude",
                          "createdAt",
                          "updatedAt"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "status",
                    "visibility",
                    "embargoUntil",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Deletes an experiment and all associated data",
        "summary": "Delete experiment",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.deleteExperiment",
        "responses": {
          "204": {
            "description": "204"
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/access": {
      "get": {
        "description": "Returns experiment details along with user access and admin status",
        "summary": "Get experiment details with access information",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.getExperimentAccess",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "experiment": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "status": {
                          "type": "string",
                          "enum": ["active", "stale", "archived", "published"]
                        },
                        "visibility": {
                          "type": "string",
                          "enum": ["private", "public"]
                        },
                        "embargoUntil": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "createdBy": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "ownerFirstName": {
                          "type": "string",
                          "nullable": true
                        },
                        "ownerLastName": {
                          "type": "string",
                          "nullable": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "data": {
                          "type": "object",
                          "properties": {
                            "columns": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "type_name": {
                                    "type": "string"
                                  },
                                  "type_text": {
                                    "type": "string"
                                  }
                                },
                                "required": ["name", "type_name", "type_text"]
                              }
                            },
                            "rows": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "additionalProperties": {
                                  "nullable": true
                                }
                              }
                            },
                            "totalRows": {
                              "type": "integer"
                            },
                            "truncated": {
                              "type": "boolean"
                            }
                          },
                          "required": ["columns", "rows", "totalRows", "truncated"]
                        },
                        "locations": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 255
                              },
                              "latitude": {
                                "type": "number",
                                "minimum": -90,
                                "maximum": 90
                              },
                              "longitude": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                              },
                              "country": {
                                "type": "string"
                              },
                              "region": {
                                "type": "string"
                              },
                              "municipality": {
                                "type": "string"
                              },
                              "postalCode": {
                                "type": "string"
                              },
                              "addressLabel": {
                                "type": "string"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "latitude",
                              "longitude",
                              "createdAt",
                              "updatedAt"
                            ]
                          }
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "status",
                        "visibility",
                        "embargoUntil",
                        "createdBy",
                        "createdAt",
                        "updatedAt"
                      ]
                    },
                    "hasAccess": {
                      "type": "boolean"
                    },
                    "isAdmin": {
                      "type": "boolean"
                    }
                  },
                  "required": ["experiment", "hasAccess", "isAdmin"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/members": {
      "get": {
        "description": "Returns a list of all users who are members of the specified experiment",
        "summary": "List experiment members",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.listExperimentMembers",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "firstName": {
                            "type": "string"
                          },
                          "lastName": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string",
                            "format": "email",
                            "nullable": true
                          }
                        },
                        "required": ["id", "firstName", "lastName", "email"]
                      },
                      "role": {
                        "type": "string",
                        "enum": ["admin", "member"]
                      },
                      "joinedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": ["user", "role", "joinedAt"]
                  }
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/members/batch": {
      "post": {
        "description": "Adds multiple members to the experiment with specified roles",
        "summary": "Add multiple experiment members",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.addExperimentMembers",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "members": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "ID of the user to add as a member"
                        },
                        "role": {
                          "default": "member",
                          "type": "string",
                          "enum": ["admin", "member"],
                          "description": "Role to assign to the new member"
                        }
                      },
                      "required": ["userId"]
                    }
                  }
                },
                "required": ["members"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "firstName": {
                            "type": "string"
                          },
                          "lastName": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string",
                            "format": "email",
                            "nullable": true
                          }
                        },
                        "required": ["id", "firstName", "lastName", "email"]
                      },
                      "role": {
                        "type": "string",
                        "enum": ["admin", "member"]
                      },
                      "joinedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": ["user", "role", "joinedAt"]
                  }
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/members/{memberId}": {
      "delete": {
        "description": "Removes a member from the experiment",
        "summary": "Remove experiment member",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the member"
          }
        ],
        "operationId": "experiments.removeExperimentMember",
        "responses": {
          "204": {
            "description": "204"
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "description": "Updates the role of an existing experiment member",
        "summary": "Update experiment member role",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the member"
          }
        ],
        "operationId": "experiments.updateExperimentMemberRole",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "role": {
                    "type": "string",
                    "enum": ["admin", "member"],
                    "description": "New role to assign to the member"
                  }
                },
                "required": ["role"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "firstName": {
                          "type": "string"
                        },
                        "lastName": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "nullable": true
                        }
                      },
                      "required": ["id", "firstName", "lastName", "email"]
                    },
                    "role": {
                      "type": "string",
                      "enum": ["admin", "member"]
                    },
                    "joinedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": ["user", "role", "joinedAt"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data": {
      "get": {
        "description": "Retrieves data tables from the experiment with pagination support",
        "summary": "Get experiment data",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "minimum": 1
                }
              }
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Number of rows per page",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100
                }
              }
            }
          },
          {
            "name": "tableName",
            "in": "query",
            "description": "Table name: 'raw_data', 'device', 'raw_ambyte_data', or macro filename",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "string",
                      "enum": ["raw_data", "device", "raw_ambyte_data"]
                    },
                    {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 256
                    }
                  ]
                }
              }
            }
          },
          {
            "name": "columns",
            "in": "query",
            "description": "Specific columns to fetch. If provided with tableName, fetches full data for these columns only",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "Column name to order results by",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          {
            "name": "orderDirection",
            "in": "query",
            "description": "Sort direction for ordering",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "enum": ["ASC", "DESC"]
                }
              }
            }
          }
        ],
        "operationId": "experiments.getExperimentData",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "description": "Technical name of the table used for queries and operations"
                      },
                      "catalog_name": {
                        "type": "string",
                        "description": "Catalog name"
                      },
                      "schema_name": {
                        "type": "string",
                        "description": "Schema name"
                      },
                      "data": {
                        "type": "object",
                        "properties": {
                          "columns": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string"
                                },
                                "type_name": {
                                  "type": "string"
                                },
                                "type_text": {
                                  "type": "string"
                                }
                              },
                              "required": ["name", "type_name", "type_text"]
                            }
                          },
                          "rows": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "additionalProperties": {
                                "nullable": true
                              }
                            }
                          },
                          "totalRows": {
                            "type": "integer"
                          },
                          "truncated": {
                            "type": "boolean"
                          }
                        },
                        "required": ["columns", "rows", "totalRows", "truncated"]
                      },
                      "page": {
                        "type": "integer"
                      },
                      "pageSize": {
                        "type": "integer"
                      },
                      "totalPages": {
                        "type": "integer"
                      },
                      "totalRows": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "name",
                      "catalog_name",
                      "schema_name",
                      "page",
                      "pageSize",
                      "totalPages",
                      "totalRows"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/tables": {
      "get": {
        "description": "Retrieves metadata for all tables in the experiment (names, display names, row counts)",
        "summary": "Get experiment tables metadata",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.getExperimentTables",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "description": "Technical name of the table used for queries and operations"
                      },
                      "displayName": {
                        "type": "string",
                        "description": "Human-readable display name of the table for UI"
                      },
                      "totalRows": {
                        "type": "integer",
                        "description": "Total number of rows in the table"
                      },
                      "defaultSortColumn": {
                        "type": "string",
                        "description": "Default column to sort by in the UI"
                      },
                      "errorColumn": {
                        "type": "string",
                        "description": "Column name that contains error information if any"
                      }
                    },
                    "required": ["name", "displayName", "totalRows"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/protocols": {
      "get": {
        "description": "Returns a list of protocol associations for the specified experiment.",
        "summary": "List protocols associated with an experiment",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.listExperimentProtocols",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "experimentId": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "order": {
                        "type": "integer"
                      },
                      "addedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "protocol": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "family": {
                            "type": "string",
                            "enum": ["multispeq", "ambit"]
                          },
                          "createdBy": {
                            "type": "string",
                            "format": "uuid"
                          }
                        },
                        "required": ["id", "name", "family", "createdBy"]
                      }
                    },
                    "required": ["experimentId", "order", "addedAt", "protocol"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Associates one or more protocols with an experiment.",
        "summary": "Add protocols to an experiment",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.addExperimentProtocols",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "protocols": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "protocolId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "order": {
                          "type": "integer"
                        }
                      },
                      "required": ["protocolId"]
                    }
                  }
                },
                "required": ["protocols"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "experimentId": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "order": {
                        "type": "integer"
                      },
                      "addedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "protocol": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "name": {
                            "type": "string"
                          },
                          "family": {
                            "type": "string",
                            "enum": ["multispeq", "ambit"]
                          },
                          "createdBy": {
                            "type": "string",
                            "format": "uuid"
                          }
                        },
                        "required": ["id", "name", "family", "createdBy"]
                      }
                    },
                    "required": ["experimentId", "order", "addedAt", "protocol"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/protocols/{protocolId}": {
      "delete": {
        "description": "Removes the association between a protocol and an experiment.",
        "summary": "Remove a protocol from an experiment",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "protocolId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the protocol association"
          }
        ],
        "operationId": "experiments.removeExperimentProtocol",
        "responses": {
          "204": {
            "description": "204"
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/flow": {
      "get": {
        "description": "Returns the flow graph for the specified experiment.",
        "summary": "Get experiment flow",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.getFlow",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "experimentId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "graph": {
                      "type": "object",
                      "properties": {
                        "nodes": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "type": {
                                "type": "string",
                                "enum": ["question", "instruction", "measurement", "analysis"]
                              },
                              "name": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 64
                              },
                              "content": {
                                "oneOf": [
                                  {
                                    "discriminator": {
                                      "propertyName": "kind"
                                    },
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["yes_no"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["open_ended"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["multi_choice"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "options": {
                                            "type": "array",
                                            "items": {
                                              "type": "string",
                                              "minLength": 1,
                                              "maxLength": 64
                                            },
                                            "minItems": 1
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text", "options"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["number"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "text": {
                                        "type": "string",
                                        "minLength": 1
                                      }
                                    },
                                    "required": ["text"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "protocolId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "params": {
                                        "type": "object",
                                        "additionalProperties": {}
                                      }
                                    },
                                    "required": ["protocolId"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "macroId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "params": {
                                        "type": "object",
                                        "additionalProperties": {}
                                      }
                                    },
                                    "required": ["macroId"]
                                  }
                                ]
                              },
                              "isStart": {
                                "default": false,
                                "type": "boolean"
                              },
                              "position": {
                                "type": "object",
                                "properties": {
                                  "x": {
                                    "type": "number"
                                  },
                                  "y": {
                                    "type": "number"
                                  }
                                },
                                "required": ["x", "y"]
                              }
                            },
                            "required": ["id", "type", "name", "content"]
                          },
                          "minItems": 1
                        },
                        "edges": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "source": {
                                "type": "string",
                                "minLength": 1
                              },
                              "target": {
                                "type": "string",
                                "minLength": 1
                              },
                              "label": {
                                "type": "string",
                                "maxLength": 64,
                                "nullable": true
                              }
                            },
                            "required": ["id", "source", "target"]
                          }
                        }
                      },
                      "required": ["nodes", "edges"]
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": ["id", "experimentId", "graph", "createdAt", "updatedAt"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Creates a new flow for the experiment with the provided graph.",
        "summary": "Create experiment flow",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.createFlow",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nodes": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "minLength": 1
                        },
                        "type": {
                          "type": "string",
                          "enum": ["question", "instruction", "measurement", "analysis"]
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 64
                        },
                        "content": {
                          "oneOf": [
                            {
                              "discriminator": {
                                "propertyName": "kind"
                              },
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["yes_no"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text"],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["open_ended"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text"],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["multi_choice"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "options": {
                                      "type": "array",
                                      "items": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 64
                                      },
                                      "minItems": 1
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text", "options"],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["number"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text"],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "text": {
                                  "type": "string",
                                  "minLength": 1
                                }
                              },
                              "required": ["text"]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "protocolId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "params": {
                                  "type": "object",
                                  "additionalProperties": {}
                                }
                              },
                              "required": ["protocolId"]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "macroId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "params": {
                                  "type": "object",
                                  "additionalProperties": {}
                                }
                              },
                              "required": ["macroId"]
                            }
                          ]
                        },
                        "isStart": {
                          "default": false,
                          "type": "boolean"
                        },
                        "position": {
                          "type": "object",
                          "properties": {
                            "x": {
                              "type": "number"
                            },
                            "y": {
                              "type": "number"
                            }
                          },
                          "required": ["x", "y"]
                        }
                      },
                      "required": ["id", "type", "name", "content"]
                    },
                    "minItems": 1
                  },
                  "edges": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "minLength": 1
                        },
                        "source": {
                          "type": "string",
                          "minLength": 1
                        },
                        "target": {
                          "type": "string",
                          "minLength": 1
                        },
                        "label": {
                          "type": "string",
                          "maxLength": 64,
                          "nullable": true
                        }
                      },
                      "required": ["id", "source", "target"]
                    }
                  }
                },
                "required": ["nodes", "edges"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "experimentId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "graph": {
                      "type": "object",
                      "properties": {
                        "nodes": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "type": {
                                "type": "string",
                                "enum": ["question", "instruction", "measurement", "analysis"]
                              },
                              "name": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 64
                              },
                              "content": {
                                "oneOf": [
                                  {
                                    "discriminator": {
                                      "propertyName": "kind"
                                    },
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["yes_no"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["open_ended"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["multi_choice"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "options": {
                                            "type": "array",
                                            "items": {
                                              "type": "string",
                                              "minLength": 1,
                                              "maxLength": 64
                                            },
                                            "minItems": 1
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text", "options"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["number"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "text": {
                                        "type": "string",
                                        "minLength": 1
                                      }
                                    },
                                    "required": ["text"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "protocolId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "params": {
                                        "type": "object",
                                        "additionalProperties": {}
                                      }
                                    },
                                    "required": ["protocolId"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "macroId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "params": {
                                        "type": "object",
                                        "additionalProperties": {}
                                      }
                                    },
                                    "required": ["macroId"]
                                  }
                                ]
                              },
                              "isStart": {
                                "default": false,
                                "type": "boolean"
                              },
                              "position": {
                                "type": "object",
                                "properties": {
                                  "x": {
                                    "type": "number"
                                  },
                                  "y": {
                                    "type": "number"
                                  }
                                },
                                "required": ["x", "y"]
                              }
                            },
                            "required": ["id", "type", "name", "content"]
                          },
                          "minItems": 1
                        },
                        "edges": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "source": {
                                "type": "string",
                                "minLength": 1
                              },
                              "target": {
                                "type": "string",
                                "minLength": 1
                              },
                              "label": {
                                "type": "string",
                                "maxLength": 64,
                                "nullable": true
                              }
                            },
                            "required": ["id", "source", "target"]
                          }
                        }
                      },
                      "required": ["nodes", "edges"]
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": ["id", "experimentId", "graph", "createdAt", "updatedAt"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "put": {
        "description": "Updates the existing flow for the experiment with the provided graph.",
        "summary": "Update experiment flow",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.updateFlow",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nodes": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "minLength": 1
                        },
                        "type": {
                          "type": "string",
                          "enum": ["question", "instruction", "measurement", "analysis"]
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 64
                        },
                        "content": {
                          "oneOf": [
                            {
                              "discriminator": {
                                "propertyName": "kind"
                              },
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["yes_no"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text"],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["open_ended"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text"],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["multi_choice"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "options": {
                                      "type": "array",
                                      "items": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 64
                                      },
                                      "minItems": 1
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text", "options"],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "kind": {
                                      "type": "string",
                                      "enum": ["number"]
                                    },
                                    "text": {
                                      "type": "string",
                                      "minLength": 1,
                                      "maxLength": 64
                                    },
                                    "required": {
                                      "default": false,
                                      "type": "boolean"
                                    }
                                  },
                                  "required": ["kind", "text"],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "text": {
                                  "type": "string",
                                  "minLength": 1
                                }
                              },
                              "required": ["text"]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "protocolId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "params": {
                                  "type": "object",
                                  "additionalProperties": {}
                                }
                              },
                              "required": ["protocolId"]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "macroId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "params": {
                                  "type": "object",
                                  "additionalProperties": {}
                                }
                              },
                              "required": ["macroId"]
                            }
                          ]
                        },
                        "isStart": {
                          "default": false,
                          "type": "boolean"
                        },
                        "position": {
                          "type": "object",
                          "properties": {
                            "x": {
                              "type": "number"
                            },
                            "y": {
                              "type": "number"
                            }
                          },
                          "required": ["x", "y"]
                        }
                      },
                      "required": ["id", "type", "name", "content"]
                    },
                    "minItems": 1
                  },
                  "edges": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "minLength": 1
                        },
                        "source": {
                          "type": "string",
                          "minLength": 1
                        },
                        "target": {
                          "type": "string",
                          "minLength": 1
                        },
                        "label": {
                          "type": "string",
                          "maxLength": 64,
                          "nullable": true
                        }
                      },
                      "required": ["id", "source", "target"]
                    }
                  }
                },
                "required": ["nodes", "edges"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "experimentId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "graph": {
                      "type": "object",
                      "properties": {
                        "nodes": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "type": {
                                "type": "string",
                                "enum": ["question", "instruction", "measurement", "analysis"]
                              },
                              "name": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 64
                              },
                              "content": {
                                "oneOf": [
                                  {
                                    "discriminator": {
                                      "propertyName": "kind"
                                    },
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["yes_no"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["open_ended"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["multi_choice"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "options": {
                                            "type": "array",
                                            "items": {
                                              "type": "string",
                                              "minLength": 1,
                                              "maxLength": 64
                                            },
                                            "minItems": 1
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text", "options"],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "kind": {
                                            "type": "string",
                                            "enum": ["number"]
                                          },
                                          "text": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 64
                                          },
                                          "required": {
                                            "default": false,
                                            "type": "boolean"
                                          }
                                        },
                                        "required": ["kind", "text"],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "text": {
                                        "type": "string",
                                        "minLength": 1
                                      }
                                    },
                                    "required": ["text"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "protocolId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "params": {
                                        "type": "object",
                                        "additionalProperties": {}
                                      }
                                    },
                                    "required": ["protocolId"]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "macroId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "params": {
                                        "type": "object",
                                        "additionalProperties": {}
                                      }
                                    },
                                    "required": ["macroId"]
                                  }
                                ]
                              },
                              "isStart": {
                                "default": false,
                                "type": "boolean"
                              },
                              "position": {
                                "type": "object",
                                "properties": {
                                  "x": {
                                    "type": "number"
                                  },
                                  "y": {
                                    "type": "number"
                                  }
                                },
                                "required": ["x", "y"]
                              }
                            },
                            "required": ["id", "type", "name", "content"]
                          },
                          "minItems": 1
                        },
                        "edges": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "source": {
                                "type": "string",
                                "minLength": 1
                              },
                              "target": {
                                "type": "string",
                                "minLength": 1
                              },
                              "label": {
                                "type": "string",
                                "maxLength": 64,
                                "nullable": true
                              }
                            },
                            "required": ["id", "source", "target"]
                          }
                        }
                      },
                      "required": ["nodes", "edges"]
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": ["id", "experimentId", "graph", "createdAt", "updatedAt"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/upload": {
      "post": {
        "description": "Uploads experiment data files to Databricks",
        "summary": "Upload experiment data",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.uploadExperimentData",
        "requestBody": {
          "description": "Body",
          "content": {
            "multipart/form-data": {
              "schema": {
                "nullable": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "uploadId": {
                      "type": "string"
                    },
                    "files": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "fileName": {
                            "type": "string"
                          },
                          "filePath": {
                            "type": "string"
                          }
                        },
                        "required": ["fileName", "filePath"]
                      }
                    }
                  },
                  "required": ["files"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/exports": {
      "post": {
        "description": "Initiates an asynchronous export job for experiment table data",
        "summary": "Initiate data export",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.initiateExport",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tableName": {
                    "type": "string",
                    "description": "Name of the table to export"
                  },
                  "format": {
                    "type": "string",
                    "enum": ["csv", "ndjson", "json-array", "parquet"],
                    "description": "Export format"
                  }
                },
                "required": ["tableName", "format"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "Export status"
                    }
                  },
                  "required": ["status"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "get": {
        "description": "Lists all export jobs for an experiment table",
        "summary": "List data exports",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "tableName",
            "in": "query",
            "description": "Name of the table",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "operationId": "experiments.listExports",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "exports": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "exportId": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "experimentId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "tableName": {
                            "type": "string"
                          },
                          "format": {
                            "type": "string",
                            "enum": ["csv", "ndjson", "json-array", "parquet"]
                          },
                          "status": {
                            "type": "string",
                            "enum": ["queued", "pending", "running", "completed", "failed"]
                          },
                          "filePath": {
                            "type": "string",
                            "nullable": true
                          },
                          "rowCount": {
                            "type": "integer",
                            "nullable": true
                          },
                          "fileSize": {
                            "type": "integer",
                            "nullable": true
                          },
                          "createdBy": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "completedAt": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true
                          }
                        },
                        "required": [
                          "exportId",
                          "experimentId",
                          "tableName",
                          "format",
                          "status",
                          "filePath",
                          "rowCount",
                          "fileSize",
                          "createdBy",
                          "createdAt",
                          "completedAt"
                        ]
                      }
                    }
                  },
                  "required": ["exports"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/exports/{exportId}": {
      "get": {
        "description": "Downloads a completed export file",
        "summary": "Download export file",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "exportId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the export"
          }
        ],
        "operationId": "experiments.downloadExport",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "nullable": true
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/locations": {
      "get": {
        "description": "Returns all locations associated with the specified experiment.",
        "summary": "Get experiment locations",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.getExperimentLocations",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 255
                      },
                      "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                      },
                      "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                      },
                      "country": {
                        "type": "string"
                      },
                      "region": {
                        "type": "string"
                      },
                      "municipality": {
                        "type": "string"
                      },
                      "postalCode": {
                        "type": "string"
                      },
                      "addressLabel": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": ["id", "name", "latitude", "longitude", "createdAt", "updatedAt"]
                  }
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Associates one or more locations with an experiment.",
        "summary": "Add locations to an experiment",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.addExperimentLocations",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "locations": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 255
                        },
                        "latitude": {
                          "type": "number",
                          "minimum": -90,
                          "maximum": 90
                        },
                        "longitude": {
                          "type": "number",
                          "minimum": -180,
                          "maximum": 180
                        },
                        "country": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        },
                        "municipality": {
                          "type": "string"
                        },
                        "postalCode": {
                          "type": "string"
                        },
                        "addressLabel": {
                          "type": "string"
                        }
                      },
                      "required": ["name", "latitude", "longitude"]
                    }
                  }
                },
                "required": ["locations"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 255
                      },
                      "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                      },
                      "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                      },
                      "country": {
                        "type": "string"
                      },
                      "region": {
                        "type": "string"
                      },
                      "municipality": {
                        "type": "string"
                      },
                      "postalCode": {
                        "type": "string"
                      },
                      "addressLabel": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": ["id", "name", "latitude", "longitude", "createdAt", "updatedAt"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "put": {
        "description": "Replaces all locations associated with an experiment.",
        "summary": "Update experiment locations",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.updateExperimentLocations",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "locations": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 255
                        },
                        "latitude": {
                          "type": "number",
                          "minimum": -90,
                          "maximum": 90
                        },
                        "longitude": {
                          "type": "number",
                          "minimum": -180,
                          "maximum": 180
                        },
                        "country": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        },
                        "municipality": {
                          "type": "string"
                        },
                        "postalCode": {
                          "type": "string"
                        },
                        "addressLabel": {
                          "type": "string"
                        }
                      },
                      "required": ["name", "latitude", "longitude"]
                    }
                  }
                },
                "required": ["locations"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 255
                      },
                      "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                      },
                      "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                      },
                      "country": {
                        "type": "string"
                      },
                      "region": {
                        "type": "string"
                      },
                      "municipality": {
                        "type": "string"
                      },
                      "postalCode": {
                        "type": "string"
                      },
                      "addressLabel": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": ["id", "name", "latitude", "longitude", "createdAt", "updatedAt"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/search": {
      "get": {
        "description": "Search for places using text query through AWS Location Service.",
        "summary": "Search for places",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "minLength": 1
                }
              }
            }
          },
          {
            "name": "maxResults",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "default": 10,
                  "type": "number",
                  "minimum": 1,
                  "maximum": 50
                }
              }
            }
          }
        ],
        "operationId": "experiments.searchPlaces",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "label": {
                        "type": "string"
                      },
                      "latitude": {
                        "type": "number"
                      },
                      "longitude": {
                        "type": "number"
                      },
                      "country": {
                        "type": "string"
                      },
                      "region": {
                        "type": "string"
                      },
                      "municipality": {
                        "type": "string"
                      },
                      "postalCode": {
                        "type": "string"
                      }
                    },
                    "required": ["label", "latitude", "longitude"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/geocode": {
      "get": {
        "description": "Get place information for given coordinates through AWS Location Service.",
        "summary": "Reverse geocode coordinates",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "latitude",
            "in": "query",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "number",
                  "minimum": -90,
                  "maximum": 90,
                  "nullable": true
                }
              }
            }
          },
          {
            "name": "longitude",
            "in": "query",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "number",
                  "minimum": -180,
                  "maximum": 180,
                  "nullable": true
                }
              }
            }
          }
        ],
        "operationId": "experiments.geocodeLocation",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "label": {
                        "type": "string"
                      },
                      "latitude": {
                        "type": "number"
                      },
                      "longitude": {
                        "type": "number"
                      },
                      "country": {
                        "type": "string"
                      },
                      "region": {
                        "type": "string"
                      },
                      "municipality": {
                        "type": "string"
                      },
                      "postalCode": {
                        "type": "string"
                      }
                    },
                    "required": ["label", "latitude", "longitude"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/visualizations": {
      "get": {
        "description": "Retrieves a list of visualizations for a specific experiment",
        "summary": "List experiment visualizations",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "chartFamily",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "enum": ["basic", "scientific", "3d", "statistical"]
                }
              }
            }
          },
          {
            "name": "limit",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "default": 50,
                  "type": "integer",
                  "minimum": 0,
                  "exclusiveMinimum": 0,
                  "maximum": 100
                }
              }
            }
          },
          {
            "name": "offset",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "default": 0,
                  "type": "integer",
                  "minimum": 0,
                  "nullable": true
                }
              }
            }
          }
        ],
        "operationId": "experiments.listExperimentVisualizations",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 255
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "experimentId": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "chartFamily": {
                        "type": "string",
                        "enum": ["basic", "scientific", "3d", "statistical"]
                      },
                      "chartType": {
                        "type": "string",
                        "enum": [
                          "line",
                          "scatter",
                          "bar",
                          "pie",
                          "area",
                          "dot-plot",
                          "bubble",
                          "lollipop",
                          "box-plot",
                          "histogram",
                          "violin-plot",
                          "error-bar",
                          "density-plot",
                          "ridge-plot",
                          "histogram-2d",
                          "scatter2density",
                          "spc-control-chart",
                          "heatmap",
                          "contour",
                          "carpet",
                          "ternary",
                          "parallel-coordinates",
                          "log-plot",
                          "wind-rose",
                          "radar",
                          "polar",
                          "correlation-matrix",
                          "alluvial"
                        ]
                      },
                      "config": {
                        "type": "object",
                        "additionalProperties": {}
                      },
                      "dataConfig": {
                        "type": "object",
                        "properties": {
                          "tableName": {
                            "type": "string",
                            "minLength": 1
                          },
                          "dataSources": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "tableName": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "columnName": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "role": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "seriesName": {
                                  "type": "string"
                                },
                                "alias": {
                                  "type": "string"
                                }
                              },
                              "required": ["tableName", "columnName", "role"]
                            },
                            "minItems": 1
                          },
                          "filters": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "column": {
                                  "type": "string"
                                },
                                "operator": {
                                  "type": "string",
                                  "enum": [
                                    "equals",
                                    "not_equals",
                                    "greater_than",
                                    "less_than",
                                    "contains",
                                    "in"
                                  ]
                                },
                                "value": {
                                  "oneOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "type": "boolean"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  ]
                                }
                              },
                              "required": ["column", "operator", "value"]
                            }
                          },
                          "aggregation": {
                            "type": "object",
                            "properties": {
                              "groupBy": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              },
                              "functions": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "column": {
                                      "type": "string"
                                    },
                                    "function": {
                                      "type": "string",
                                      "enum": ["sum", "avg", "count", "min", "max", "std", "var"]
                                    },
                                    "alias": {
                                      "type": "string"
                                    }
                                  },
                                  "required": ["column", "function"]
                                }
                              }
                            }
                          }
                        },
                        "required": ["tableName", "dataSources"]
                      },
                      "createdBy": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "createdByName": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "description",
                      "experimentId",
                      "chartFamily",
                      "chartType",
                      "dataConfig",
                      "createdBy",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Creates a new visualization for an experiment with the provided configuration",
        "summary": "Create experiment visualization",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.createExperimentVisualization",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "chartFamily": {
                    "type": "string",
                    "enum": ["basic", "scientific", "3d", "statistical"]
                  },
                  "chartType": {
                    "type": "string",
                    "enum": [
                      "line",
                      "scatter",
                      "bar",
                      "pie",
                      "area",
                      "dot-plot",
                      "bubble",
                      "lollipop",
                      "box-plot",
                      "histogram",
                      "violin-plot",
                      "error-bar",
                      "density-plot",
                      "ridge-plot",
                      "histogram-2d",
                      "scatter2density",
                      "spc-control-chart",
                      "heatmap",
                      "contour",
                      "carpet",
                      "ternary",
                      "parallel-coordinates",
                      "log-plot",
                      "wind-rose",
                      "radar",
                      "polar",
                      "correlation-matrix",
                      "alluvial"
                    ]
                  },
                  "config": {
                    "type": "object",
                    "additionalProperties": {}
                  },
                  "dataConfig": {
                    "type": "object",
                    "properties": {
                      "tableName": {
                        "type": "string",
                        "minLength": 1
                      },
                      "dataSources": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "tableName": {
                              "type": "string",
                              "minLength": 1
                            },
                            "columnName": {
                              "type": "string",
                              "minLength": 1
                            },
                            "role": {
                              "type": "string",
                              "minLength": 1
                            },
                            "seriesName": {
                              "type": "string"
                            },
                            "alias": {
                              "type": "string"
                            }
                          },
                          "required": ["tableName", "columnName", "role"]
                        },
                        "minItems": 1
                      },
                      "filters": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "column": {
                              "type": "string"
                            },
                            "operator": {
                              "type": "string",
                              "enum": [
                                "equals",
                                "not_equals",
                                "greater_than",
                                "less_than",
                                "contains",
                                "in"
                              ]
                            },
                            "value": {
                              "oneOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "number"
                                },
                                {
                                  "type": "boolean"
                                },
                                {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                }
                              ]
                            }
                          },
                          "required": ["column", "operator", "value"]
                        }
                      },
                      "aggregation": {
                        "type": "object",
                        "properties": {
                          "groupBy": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "functions": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "column": {
                                  "type": "string"
                                },
                                "function": {
                                  "type": "string",
                                  "enum": ["sum", "avg", "count", "min", "max", "std", "var"]
                                },
                                "alias": {
                                  "type": "string"
                                }
                              },
                              "required": ["column", "function"]
                            }
                          }
                        }
                      }
                    },
                    "required": ["tableName", "dataSources"]
                  }
                },
                "required": ["name", "chartFamily", "chartType", "dataConfig"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 255
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "experimentId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "chartFamily": {
                      "type": "string",
                      "enum": ["basic", "scientific", "3d", "statistical"]
                    },
                    "chartType": {
                      "type": "string",
                      "enum": [
                        "line",
                        "scatter",
                        "bar",
                        "pie",
                        "area",
                        "dot-plot",
                        "bubble",
                        "lollipop",
                        "box-plot",
                        "histogram",
                        "violin-plot",
                        "error-bar",
                        "density-plot",
                        "ridge-plot",
                        "histogram-2d",
                        "scatter2density",
                        "spc-control-chart",
                        "heatmap",
                        "contour",
                        "carpet",
                        "ternary",
                        "parallel-coordinates",
                        "log-plot",
                        "wind-rose",
                        "radar",
                        "polar",
                        "correlation-matrix",
                        "alluvial"
                      ]
                    },
                    "config": {
                      "type": "object",
                      "additionalProperties": {}
                    },
                    "dataConfig": {
                      "type": "object",
                      "properties": {
                        "tableName": {
                          "type": "string",
                          "minLength": 1
                        },
                        "dataSources": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "tableName": {
                                "type": "string",
                                "minLength": 1
                              },
                              "columnName": {
                                "type": "string",
                                "minLength": 1
                              },
                              "role": {
                                "type": "string",
                                "minLength": 1
                              },
                              "seriesName": {
                                "type": "string"
                              },
                              "alias": {
                                "type": "string"
                              }
                            },
                            "required": ["tableName", "columnName", "role"]
                          },
                          "minItems": 1
                        },
                        "filters": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "column": {
                                "type": "string"
                              },
                              "operator": {
                                "type": "string",
                                "enum": [
                                  "equals",
                                  "not_equals",
                                  "greater_than",
                                  "less_than",
                                  "contains",
                                  "in"
                                ]
                              },
                              "value": {
                                "oneOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "number"
                                  },
                                  {
                                    "type": "boolean"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": ["column", "operator", "value"]
                          }
                        },
                        "aggregation": {
                          "type": "object",
                          "properties": {
                            "groupBy": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "functions": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "column": {
                                    "type": "string"
                                  },
                                  "function": {
                                    "type": "string",
                                    "enum": ["sum", "avg", "count", "min", "max", "std", "var"]
                                  },
                                  "alias": {
                                    "type": "string"
                                  }
                                },
                                "required": ["column", "function"]
                              }
                            }
                          }
                        }
                      },
                      "required": ["tableName", "dataSources"]
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "experimentId",
                    "chartFamily",
                    "chartType",
                    "dataConfig",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/visualizations/{visualizationId}": {
      "get": {
        "description": "Retrieves a specific visualization by its ID",
        "summary": "Get experiment visualization",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "visualizationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the visualization"
          }
        ],
        "operationId": "experiments.getExperimentVisualization",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 255
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "experimentId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "chartFamily": {
                      "type": "string",
                      "enum": ["basic", "scientific", "3d", "statistical"]
                    },
                    "chartType": {
                      "type": "string",
                      "enum": [
                        "line",
                        "scatter",
                        "bar",
                        "pie",
                        "area",
                        "dot-plot",
                        "bubble",
                        "lollipop",
                        "box-plot",
                        "histogram",
                        "violin-plot",
                        "error-bar",
                        "density-plot",
                        "ridge-plot",
                        "histogram-2d",
                        "scatter2density",
                        "spc-control-chart",
                        "heatmap",
                        "contour",
                        "carpet",
                        "ternary",
                        "parallel-coordinates",
                        "log-plot",
                        "wind-rose",
                        "radar",
                        "polar",
                        "correlation-matrix",
                        "alluvial"
                      ]
                    },
                    "config": {
                      "type": "object",
                      "additionalProperties": {}
                    },
                    "dataConfig": {
                      "type": "object",
                      "properties": {
                        "tableName": {
                          "type": "string",
                          "minLength": 1
                        },
                        "dataSources": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "tableName": {
                                "type": "string",
                                "minLength": 1
                              },
                              "columnName": {
                                "type": "string",
                                "minLength": 1
                              },
                              "role": {
                                "type": "string",
                                "minLength": 1
                              },
                              "seriesName": {
                                "type": "string"
                              },
                              "alias": {
                                "type": "string"
                              }
                            },
                            "required": ["tableName", "columnName", "role"]
                          },
                          "minItems": 1
                        },
                        "filters": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "column": {
                                "type": "string"
                              },
                              "operator": {
                                "type": "string",
                                "enum": [
                                  "equals",
                                  "not_equals",
                                  "greater_than",
                                  "less_than",
                                  "contains",
                                  "in"
                                ]
                              },
                              "value": {
                                "oneOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "number"
                                  },
                                  {
                                    "type": "boolean"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": ["column", "operator", "value"]
                          }
                        },
                        "aggregation": {
                          "type": "object",
                          "properties": {
                            "groupBy": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "functions": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "column": {
                                    "type": "string"
                                  },
                                  "function": {
                                    "type": "string",
                                    "enum": ["sum", "avg", "count", "min", "max", "std", "var"]
                                  },
                                  "alias": {
                                    "type": "string"
                                  }
                                },
                                "required": ["column", "function"]
                              }
                            }
                          }
                        }
                      },
                      "required": ["tableName", "dataSources"]
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "experimentId",
                    "chartFamily",
                    "chartType",
                    "dataConfig",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "description": "Updates an existing visualization with the provided data",
        "summary": "Update experiment visualization",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "visualizationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the visualization"
          }
        ],
        "operationId": "experiments.updateExperimentVisualization",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "chartFamily": {
                    "type": "string",
                    "enum": ["basic", "scientific", "3d", "statistical"]
                  },
                  "chartType": {
                    "type": "string",
                    "enum": [
                      "line",
                      "scatter",
                      "bar",
                      "pie",
                      "area",
                      "dot-plot",
                      "bubble",
                      "lollipop",
                      "box-plot",
                      "histogram",
                      "violin-plot",
                      "error-bar",
                      "density-plot",
                      "ridge-plot",
                      "histogram-2d",
                      "scatter2density",
                      "spc-control-chart",
                      "heatmap",
                      "contour",
                      "carpet",
                      "ternary",
                      "parallel-coordinates",
                      "log-plot",
                      "wind-rose",
                      "radar",
                      "polar",
                      "correlation-matrix",
                      "alluvial"
                    ]
                  },
                  "config": {
                    "type": "object",
                    "additionalProperties": {}
                  },
                  "dataConfig": {
                    "type": "object",
                    "properties": {
                      "tableName": {
                        "type": "string",
                        "minLength": 1
                      },
                      "dataSources": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "tableName": {
                              "type": "string",
                              "minLength": 1
                            },
                            "columnName": {
                              "type": "string",
                              "minLength": 1
                            },
                            "role": {
                              "type": "string",
                              "minLength": 1
                            },
                            "seriesName": {
                              "type": "string"
                            },
                            "alias": {
                              "type": "string"
                            }
                          },
                          "required": ["tableName", "columnName", "role"]
                        },
                        "minItems": 1
                      },
                      "filters": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "column": {
                              "type": "string"
                            },
                            "operator": {
                              "type": "string",
                              "enum": [
                                "equals",
                                "not_equals",
                                "greater_than",
                                "less_than",
                                "contains",
                                "in"
                              ]
                            },
                            "value": {
                              "oneOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "number"
                                },
                                {
                                  "type": "boolean"
                                },
                                {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                }
                              ]
                            }
                          },
                          "required": ["column", "operator", "value"]
                        }
                      },
                      "aggregation": {
                        "type": "object",
                        "properties": {
                          "groupBy": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "functions": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "column": {
                                  "type": "string"
                                },
                                "function": {
                                  "type": "string",
                                  "enum": ["sum", "avg", "count", "min", "max", "std", "var"]
                                },
                                "alias": {
                                  "type": "string"
                                }
                              },
                              "required": ["column", "function"]
                            }
                          }
                        }
                      }
                    },
                    "required": ["tableName", "dataSources"]
                  }
                },
                "required": ["name", "chartFamily", "chartType", "dataConfig"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 255
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "experimentId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "chartFamily": {
                      "type": "string",
                      "enum": ["basic", "scientific", "3d", "statistical"]
                    },
                    "chartType": {
                      "type": "string",
                      "enum": [
                        "line",
                        "scatter",
                        "bar",
                        "pie",
                        "area",
                        "dot-plot",
                        "bubble",
                        "lollipop",
                        "box-plot",
                        "histogram",
                        "violin-plot",
                        "error-bar",
                        "density-plot",
                        "ridge-plot",
                        "histogram-2d",
                        "scatter2density",
                        "spc-control-chart",
                        "heatmap",
                        "contour",
                        "carpet",
                        "ternary",
                        "parallel-coordinates",
                        "log-plot",
                        "wind-rose",
                        "radar",
                        "polar",
                        "correlation-matrix",
                        "alluvial"
                      ]
                    },
                    "config": {
                      "type": "object",
                      "additionalProperties": {}
                    },
                    "dataConfig": {
                      "type": "object",
                      "properties": {
                        "tableName": {
                          "type": "string",
                          "minLength": 1
                        },
                        "dataSources": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "tableName": {
                                "type": "string",
                                "minLength": 1
                              },
                              "columnName": {
                                "type": "string",
                                "minLength": 1
                              },
                              "role": {
                                "type": "string",
                                "minLength": 1
                              },
                              "seriesName": {
                                "type": "string"
                              },
                              "alias": {
                                "type": "string"
                              }
                            },
                            "required": ["tableName", "columnName", "role"]
                          },
                          "minItems": 1
                        },
                        "filters": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "column": {
                                "type": "string"
                              },
                              "operator": {
                                "type": "string",
                                "enum": [
                                  "equals",
                                  "not_equals",
                                  "greater_than",
                                  "less_than",
                                  "contains",
                                  "in"
                                ]
                              },
                              "value": {
                                "oneOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "number"
                                  },
                                  {
                                    "type": "boolean"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": ["column", "operator", "value"]
                          }
                        },
                        "aggregation": {
                          "type": "object",
                          "properties": {
                            "groupBy": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "functions": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "column": {
                                    "type": "string"
                                  },
                                  "function": {
                                    "type": "string",
                                    "enum": ["sum", "avg", "count", "min", "max", "std", "var"]
                                  },
                                  "alias": {
                                    "type": "string"
                                  }
                                },
                                "required": ["column", "function"]
                              }
                            }
                          }
                        }
                      },
                      "required": ["tableName", "dataSources"]
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "experimentId",
                    "chartFamily",
                    "chartType",
                    "dataConfig",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Permanently deletes a visualization",
        "summary": "Delete experiment visualization",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "visualizationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the visualization"
          }
        ],
        "operationId": "experiments.deleteExperimentVisualization",
        "responses": {
          "204": {
            "description": "204"
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/annotations": {
      "post": {
        "summary": "Add annotation to experiment data",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.addAnnotation",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tableName": {
                    "type": "string"
                  },
                  "rowId": {
                    "type": "string",
                    "minLength": 1
                  },
                  "annotation": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": ["comment", "flag"]
                      },
                      "content": {
                        "discriminator": {
                          "propertyName": "type"
                        },
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": ["comment"]
                              },
                              "text": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 255
                              }
                            },
                            "required": ["type", "text"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": ["flag"]
                              },
                              "flagType": {
                                "type": "string",
                                "enum": ["outlier", "needs_review"]
                              },
                              "text": {
                                "type": "string",
                                "maxLength": 255
                              }
                            },
                            "required": ["type", "flagType"]
                          }
                        ]
                      }
                    },
                    "required": ["type", "content"]
                  }
                },
                "required": ["tableName", "rowId", "annotation"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rowsAffected": {
                      "type": "integer"
                    }
                  },
                  "required": ["rowsAffected"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/annotations/bulk": {
      "post": {
        "summary": "Add multiple annotations to experiment data",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.addAnnotationsBulk",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tableName": {
                    "type": "string"
                  },
                  "rowIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1
                    },
                    "minItems": 1
                  },
                  "annotation": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": ["comment", "flag"]
                      },
                      "content": {
                        "discriminator": {
                          "propertyName": "type"
                        },
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": ["comment"]
                              },
                              "text": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 255
                              }
                            },
                            "required": ["type", "text"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": ["flag"]
                              },
                              "flagType": {
                                "type": "string",
                                "enum": ["outlier", "needs_review"]
                              },
                              "text": {
                                "type": "string",
                                "maxLength": 255
                              }
                            },
                            "required": ["type", "flagType"]
                          }
                        ]
                      }
                    },
                    "required": ["type", "content"]
                  }
                },
                "required": ["tableName", "rowIds", "annotation"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rowsAffected": {
                      "type": "integer"
                    }
                  },
                  "required": ["rowsAffected"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/annotations/{annotationId}": {
      "patch": {
        "summary": "Update annotation",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "annotationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the annotation"
          }
        ],
        "operationId": "experiments.updateAnnotation",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "discriminator": {
                      "propertyName": "type"
                    },
                    "oneOf": [
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["comment"]
                          },
                          "text": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 255
                          }
                        },
                        "required": ["type", "text"]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["flag"]
                          },
                          "flagType": {
                            "type": "string",
                            "enum": ["outlier", "needs_review"]
                          },
                          "text": {
                            "type": "string",
                            "maxLength": 255
                          }
                        },
                        "required": ["type", "flagType"]
                      }
                    ],
                    "description": "Updated content"
                  }
                },
                "required": ["content"]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "204",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rowsAffected": {
                      "type": "integer"
                    }
                  },
                  "required": ["rowsAffected"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete annotation",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          },
          {
            "name": "annotationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the annotation"
          }
        ],
        "operationId": "experiments.deleteAnnotation",
        "responses": {
          "204": {
            "description": "204",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rowsAffected": {
                      "type": "integer"
                    }
                  },
                  "required": ["rowsAffected"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/experiments/{id}/data/annotations/bulk-delete": {
      "post": {
        "summary": "Delete multiple annotations",
        "tags": ["experiments"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the experiment"
          }
        ],
        "operationId": "experiments.deleteAnnotationsBulk",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tableName": {
                    "type": "string",
                    "description": "Name of the data table"
                  },
                  "rowIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1
                    },
                    "minItems": 1,
                    "description": "Rows IDs to delete"
                  },
                  "type": {
                    "type": "string",
                    "enum": ["comment", "flag"],
                    "description": "Type of annotations to delete"
                  }
                },
                "required": ["tableName", "rowIds", "type"]
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "204",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rowsAffected": {
                      "type": "integer"
                    }
                  },
                  "required": ["rowsAffected"]
                }
              }
            }
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transfer-requests": {
      "post": {
        "summary": "Create a project transfer request",
        "tags": ["experiments"],
        "parameters": [],
        "operationId": "experiments.createTransferRequest",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "projectIdOld": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "projectUrlOld": {
                    "type": "string",
                    "format": "uri"
                  }
                },
                "required": ["projectIdOld", "projectUrlOld"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requestId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "userEmail": {
                      "type": "string",
                      "format": "email"
                    },
                    "sourcePlatform": {
                      "type": "string"
                    },
                    "projectIdOld": {
                      "type": "string"
                    },
                    "projectUrlOld": {
                      "type": "string",
                      "format": "uri"
                    },
                    "status": {
                      "type": "string",
                      "enum": ["pending", "completed", "rejected"]
                    },
                    "requestedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "requestId",
                    "userId",
                    "userEmail",
                    "sourcePlatform",
                    "projectIdOld",
                    "projectUrlOld",
                    "status",
                    "requestedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "500": {
            "description": "500",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List all transfer requests for the authenticated user",
        "tags": ["experiments"],
        "parameters": [],
        "operationId": "experiments.listTransferRequests",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "requestId": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "userId": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "userEmail": {
                        "type": "string",
                        "format": "email"
                      },
                      "sourcePlatform": {
                        "type": "string"
                      },
                      "projectIdOld": {
                        "type": "string"
                      },
                      "projectUrlOld": {
                        "type": "string",
                        "format": "uri"
                      },
                      "status": {
                        "type": "string",
                        "enum": ["pending", "completed", "rejected"]
                      },
                      "requestedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": [
                      "requestId",
                      "userId",
                      "userEmail",
                      "sourcePlatform",
                      "projectIdOld",
                      "projectUrlOld",
                      "status",
                      "requestedAt"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "500": {
            "description": "500",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/macros": {
      "get": {
        "description": "Returns a list of macros based on the specified filter criteria",
        "summary": "List macros",
        "tags": ["macros"],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          {
            "name": "language",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "enum": ["python", "r", "javascript"]
                }
              }
            }
          }
        ],
        "operationId": "macros.listMacros",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string"
                      },
                      "filename": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "language": {
                        "type": "string",
                        "enum": ["python", "r", "javascript"]
                      },
                      "code": {
                        "type": "string"
                      },
                      "sortOrder": {
                        "type": "number",
                        "nullable": true
                      },
                      "createdBy": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "createdByName": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "filename",
                      "description",
                      "language",
                      "code",
                      "sortOrder",
                      "createdBy",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Creates a new macro with the given properties and processes the code file through Databricks",
        "summary": "Create a new macro",
        "tags": ["macros"],
        "parameters": [],
        "operationId": "macros.createMacro",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string",
                    "enum": ["python", "r", "javascript"]
                  },
                  "code": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": ["name", "language", "code"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "filename": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "enum": ["python", "r", "javascript"]
                    },
                    "code": {
                      "type": "string"
                    },
                    "sortOrder": {
                      "type": "number",
                      "nullable": true
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "filename",
                    "description",
                    "language",
                    "code",
                    "sortOrder",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/macros/{id}": {
      "get": {
        "description": "Returns a macro by its ID",
        "summary": "Get macro by ID",
        "tags": ["macros"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "operationId": "macros.getMacro",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "filename": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "enum": ["python", "r", "javascript"]
                    },
                    "code": {
                      "type": "string"
                    },
                    "sortOrder": {
                      "type": "number",
                      "nullable": true
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "filename",
                    "description",
                    "language",
                    "code",
                    "sortOrder",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      },
      "put": {
        "description": "Updates an existing macro and optionally processes a new code file through Databricks",
        "summary": "Update an existing macro",
        "tags": ["macros"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "operationId": "macros.updateMacro",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string",
                    "enum": ["python", "r", "javascript"]
                  },
                  "code": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "filename": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "language": {
                      "type": "string",
                      "enum": ["python", "r", "javascript"]
                    },
                    "code": {
                      "type": "string"
                    },
                    "sortOrder": {
                      "type": "number",
                      "nullable": true
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "filename",
                    "description",
                    "language",
                    "code",
                    "sortOrder",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Deletes a macro by its ID",
        "summary": "Delete a macro",
        "tags": ["macros"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "operationId": "macros.deleteMacro",
        "responses": {
          "204": {
            "description": "204",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protocols": {
      "get": {
        "description": "Returns a list of protocols based on the specified filter criteria",
        "summary": "List protocols",
        "tags": ["protocols"],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "operationId": "protocols.listProtocols",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "name": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "code": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "additionalProperties": {}
                        }
                      },
                      "family": {
                        "type": "string",
                        "enum": ["multispeq", "ambit"]
                      },
                      "sortOrder": {
                        "type": "number",
                        "nullable": true
                      },
                      "createdBy": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "createdByName": {
                        "type": "string"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "description",
                      "code",
                      "family",
                      "sortOrder",
                      "createdBy",
                      "createdAt",
                      "updatedAt"
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      },
      "post": {
        "description": "Creates a new protocol with the given properties",
        "summary": "Create a new protocol",
        "tags": ["protocols"],
        "parameters": [],
        "operationId": "protocols.createProtocol",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "code": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "additionalProperties": {}
                    }
                  },
                  "family": {
                    "type": "string",
                    "enum": ["multispeq", "ambit"]
                  }
                },
                "required": ["name", "code", "family"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "code": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "additionalProperties": {}
                      }
                    },
                    "family": {
                      "type": "string",
                      "enum": ["multispeq", "ambit"]
                    },
                    "sortOrder": {
                      "type": "number",
                      "nullable": true
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "code",
                    "family",
                    "sortOrder",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protocols/{id}": {
      "get": {
        "description": "Returns a protocol by its ID",
        "summary": "Get protocol by ID",
        "tags": ["protocols"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "operationId": "protocols.getProtocol",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "code": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "additionalProperties": {}
                      }
                    },
                    "family": {
                      "type": "string",
                      "enum": ["multispeq", "ambit"]
                    },
                    "sortOrder": {
                      "type": "number",
                      "nullable": true
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "code",
                    "family",
                    "sortOrder",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "description": "Updates a protocol with the given properties",
        "summary": "Update a protocol",
        "tags": ["protocols"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "operationId": "protocols.updateProtocol",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "code": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "additionalProperties": {}
                    }
                  },
                  "family": {
                    "type": "string",
                    "enum": ["multispeq", "ambit"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "code": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "additionalProperties": {}
                      }
                    },
                    "family": {
                      "type": "string",
                      "enum": ["multispeq", "ambit"]
                    },
                    "sortOrder": {
                      "type": "number",
                      "nullable": true
                    },
                    "createdBy": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "createdByName": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "code",
                    "family",
                    "sortOrder",
                    "createdBy",
                    "createdAt",
                    "updatedAt"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Deletes a protocol by its ID",
        "summary": "Delete a protocol",
        "tags": ["protocols"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "operationId": "protocols.deleteProtocol",
        "responses": {
          "204": {
            "description": "204"
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["message", "statusCode"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/search": {
      "get": {
        "description": "Search for users by name or email with pagination support",
        "summary": "Search users",
        "tags": ["users"],
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "description": "Search query for name or email",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of users to return",
            "content": {
              "application/json": {
                "schema": {
                  "default": 50,
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100
                }
              }
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of users to skip for pagination",
            "content": {
              "application/json": {
                "schema": {
                  "default": 0,
                  "type": "integer",
                  "minimum": 0,
                  "nullable": true
                }
              }
            }
          }
        ],
        "operationId": "users.searchUsers",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "userId": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "firstName": {
                        "type": "string"
                      },
                      "lastName": {
                        "type": "string"
                      },
                      "bio": {
                        "type": "string",
                        "nullable": true
                      },
                      "organization": {
                        "type": "string"
                      },
                      "activated": {
                        "type": "boolean",
                        "nullable": true
                      },
                      "email": {
                        "type": "string",
                        "format": "email",
                        "nullable": true
                      }
                    },
                    "required": ["userId", "firstName", "lastName", "bio", "activated", "email"]
                  }
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "description": "Returns a single user by their unique identifier",
        "summary": "Get a user by ID",
        "tags": ["users"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the user"
          }
        ],
        "operationId": "users.getUser",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "name": {
                      "type": "string",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "format": "email",
                      "nullable": true
                    },
                    "emailVerified": {
                      "type": "boolean"
                    },
                    "image": {
                      "type": "string",
                      "nullable": true
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "registered": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "email",
                    "emailVerified",
                    "image",
                    "createdAt",
                    "registered"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "description": "Deletes a user by their ID if allowed",
        "summary": "Delete a user",
        "tags": ["users"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the user"
          }
        ],
        "operationId": "users.deleteUser",
        "responses": {
          "204": {
            "description": "204"
          },
          "403": {
            "description": "403",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/profile": {
      "post": {
        "description": "Creates user profile and sets the user as registered",
        "summary": "Create user profile",
        "tags": ["users"],
        "parameters": [],
        "operationId": "users.createUserProfile",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": {
                    "type": "string",
                    "minLength": 2,
                    "description": "First name"
                  },
                  "lastName": {
                    "type": "string",
                    "minLength": 2,
                    "description": "Last name"
                  },
                  "bio": {
                    "type": "string",
                    "description": "Bio"
                  },
                  "organization": {
                    "type": "string",
                    "description": "Organization"
                  },
                  "activated": {
                    "type": "boolean",
                    "description": "Whether the profile is active or deactivated"
                  }
                },
                "required": ["firstName", "lastName"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "201",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {}
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{id}/profile": {
      "get": {
        "description": "Returns the user's profile information including firstName, lastName, bio, and organization",
        "summary": "Get user profile",
        "tags": ["users"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID of the user"
          }
        ],
        "operationId": "users.getUserProfile",
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "firstName": {
                      "type": "string"
                    },
                    "lastName": {
                      "type": "string"
                    },
                    "bio": {
                      "type": "string",
                      "nullable": true
                    },
                    "organization": {
                      "type": "string"
                    },
                    "activated": {
                      "type": "boolean",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "format": "email",
                      "nullable": true
                    }
                  },
                  "required": ["userId", "firstName", "lastName", "bio", "activated", "email"]
                }
              }
            }
          },
          "404": {
            "description": "404",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": ["message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/metadata": {
      "post": {
        "description": "Fetches user profile metadata (firstName, lastName, avatarUrl) for multiple user IDs to populate Databricks pipeline tables",
        "summary": "Get user metadata for Databricks pipelines",
        "tags": ["users"],
        "parameters": [
          {
            "name": "x-api-key-id",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-databricks-signature",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-databricks-timestamp",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "operationId": "users.getUserMetadata",
        "requestBody": {
          "description": "Body",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1,
                    "maxItems": 100
                  }
                },
                "required": ["userIds"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "users": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "userId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "firstName": {
                            "type": "string"
                          },
                          "lastName": {
                            "type": "string"
                          },
                          "avatarUrl": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": ["userId", "firstName", "lastName", "avatarUrl"]
                      }
                    },
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": ["users", "success"]
                }
              }
            }
          },
          "400": {
            "description": "400",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["error", "message", "statusCode"]
                }
              }
            }
          },
          "401": {
            "description": "401",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number"
                    }
                  },
                  "required": ["error", "message", "statusCode"]
                }
              }
            }
          }
        }
      }
    }
  },
  "info": {
    "title": "openJII API",
    "version": "1.0.0",
    "description": "REST API documentation for the openJII platform"
  },
  "servers": [
    {
      "url": "http://localhost:3020",
      "description": "Local development"
    }
  ]
}
